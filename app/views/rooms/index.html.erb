<div class="banner">
  <div class="container">
    <h1><%= sanitize(t(".welcome_html", owner: @hero_owner_name, location: @hero_location), tags: %w[strong]) %></h1>
    <p><%= t(".subtitle") %></p>
  </div>
</div>

<div class="container py-4">
  <div class="card lv-card bg-white">
    <div class="card-body">
      <div class="text-uppercase lv-muted small">Loc Vallis</div>
      <h2 class="h4 mb-2"><%= t(".guesthouse_intro.title") %></h2>
      <div class="lv-meta"><%= t(".guesthouse_intro.text") %></div>
      <div class="mt-3 text-end" style="font-family: Georgia, 'Times New Roman', serif; font-style: italic;">
        — <%= t(".guesthouse_intro.signature") %>
      </div>
    </div>
  </div>

  <%= render "shared/ui/page_header",
    title: t(".accommodations") %>

  <div class="row g-3 mt-1">
    <% @rooms.each do |room| %>
      <div class="col-12 col-md-6 col-lg-4">
        <%= render "shared/ui/room_card", room: room %>
      </div>
    <% end %>
  </div>
</div>

<% mapbox_access_token = ENV["MAPBOX_ACCESS_TOKEN"].to_s %>
<% map_address = (@owner_postal_address.presence || ENV.fetch("MAP_ADDRESS", "Anglès, France")) %>
<% map_lat = ENV.fetch("MAP_LAT", "43.5644").to_f %>
<% map_lng = ENV.fetch("MAP_LNG", "2.5617").to_f %>

<div class="container mt-4">
  <div class="row g-3">
    <div class="col-12 col-lg-8">
      <div class="card lv-card p-0 overflow-hidden" style="height: 320px; display: block;">
        <% if mapbox_access_token.present? %>
          <div
            data-controller="mapbox"
            data-mapbox-access-token-value="<%= mapbox_access_token %>"
            data-mapbox-address-value="<%= map_address %>"
            data-mapbox-lat-value="<%= map_lat %>"
            data-mapbox-lng-value="<%= map_lng %>"
            data-mapbox-zoom-value="13"
            data-mapbox-interactive-value="true"
            data-mapbox-require-alt-value="true"
            data-mapbox-animate-zoom-value="true"
            data-mapbox-animate-duration-ms-value="2000"
            style="height: 100%; width: 100%;"
          ></div>
        <% else %>
          <div class="h-100 w-100 d-flex align-items-center justify-content-center lv-surface text-muted">
            <%= t(".mapbox_access_token_missing") %>
          </div>
        <% end %>
      </div>
    </div>

    <div class="col-12 col-lg-4">
      <div class="card lv-card">
        <div class="card-body">
          <h2 class="h5 mb-3"><%= t(".contact_title") %></h2>

        <dl class="mb-0">
          <div class="mb-2">
            <dt class="text-muted small"><%= t(".guesthouse_name_label") %></dt>
            <dd class="mb-0"><%= @guesthouse_name.presence || t(".not_provided") %></dd>
          </div>

          <div class="mb-2">
            <dt class="text-muted small"><%= t(".owner_label") %></dt>
            <dd class="mb-0">
              <% owner_full_name = [@owner&.first_name, @owner&.last_name].compact.join(" ") %>
              <%= owner_full_name.presence || t(".not_provided") %>
            </dd>
          </div>

          <div class="mb-2">
            <dt class="text-muted small"><%= t(".postal_address_label") %></dt>
            <dd class="mb-0"><%= @owner_postal_address.presence || t(".not_provided") %></dd>
          </div>

          <div class="mb-2">
            <dt class="text-muted small"><%= t(".phone_label") %></dt>
            <dd class="mb-0">
              <% if @owner_phone.present? %>
                <%= link_to @owner_phone, "tel:#{@owner_phone}", class: "text-decoration-none" %>
              <% else %>
                <%= t(".not_provided") %>
              <% end %>
            </dd>
          </div>

          <div>
            <dt class="text-muted small"><%= t(".email_label") %></dt>
            <dd class="mb-0">
              <% owner_email = @owner&.email.to_s %>
              <% if owner_email.present? %>
                <%= mail_to owner_email, owner_email, class: "text-decoration-none" %>
              <% else %>
                <%= t(".not_provided") %>
              <% end %>
            </dd>
          </div>
          </dl>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="container mt-4">
  <div class="card lv-card">
    <div class="card-body">
      <h2 class="h5 mb-3"><%= t(".practical_info.title") %></h2>

      <ul class="list-unstyled mb-0 d-grid gap-2">
        <li class="d-flex align-items-start gap-2">
          <i class="fa-solid fa-square-parking text-muted" aria-hidden="true"></i>
          <span><%= t(".practical_info.parking") %></span>
        </li>
        <li class="d-flex align-items-start gap-2">
          <i class="fa-solid fa-bicycle text-muted" aria-hidden="true"></i>
          <span><%= t(".practical_info.bike_storage") %></span>
        </li>
        <li class="d-flex align-items-start gap-2">
          <i class="fa-solid fa-dog text-muted" aria-hidden="true"></i>
          <span><%= t(".practical_info.no_dogs") %></span>
        </li>
        <li class="d-flex align-items-start gap-2">
          <i class="fa-solid fa-wifi text-muted" aria-hidden="true"></i>
          <span><%= t(".practical_info.wifi") %></span>
        </li>
        <li class="d-flex align-items-start gap-2">
          <i class="fa-solid fa-soap text-muted" aria-hidden="true"></i>
          <span><%= t(".practical_info.washer") %></span>
        </li>
        <li class="d-flex align-items-start gap-2">
          <i class="fa-solid fa-wind text-muted" aria-hidden="true"></i>
          <span><%= t(".practical_info.dryer") %></span>
        </li>
      </ul>
    </div>
  </div>
</div>
